<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <h1>Esercizio 2</h1>
        <style>
            h1{
                width: 350px;
                text-align: center;
            }
            div{
                width: 350px;
            }
            table{
                line-height: 30px;
            }
            #firstRow{
                width: 150px;
            }
            #secondRow{
                width: 200px;
            }
            
        </style>
    </head>
    <body>  
        <form action="" name="form">
            <div>
            <table >
                <tr>
                    <td id="firstRow">
                        <label for="name">Nome</label><br>
                        <label for="surname">Cognome</label><br>
                        <label for="bDay">Data di nascita</label><br>
                        <label for="gender">Sesso</label><br>
                    </td>
                    <td  id="secondRow">
                        <input type="text" id="name"><br>
                        <input type="text" id="surname"><br>
                        <input type="date" id="bDay" min="1900-01-01"><br>
                        <select id="gender">
                            <option value="male">Maschio</option>
                            <option value="female">Femmina</option>
                        </select>
                    </td>
                </tr>
            </table>
            </div>   
        
        <div >
            <table>
                <tr>
                    <td id="firstRow"></td>
                    <td id="secondRow">
                        <button onclick="reset()">Cancella</button>
                        <button onclick="myFunction()">Invia</button>
                    </td>
                </tr>
            </table>
        </div>
        </form>
        <p id="p"></p>
        <script>
            
            function myFunction(){
                
                var name = document.getElementById("name").value;
                
                localStorage.setItem("nameStorage", name);
                var surname = document.getElementById("surname").value;
                localStorage.setItem("surnameStorage", surname);
                var bDay =  new Date(document.getElementById("bDay").value);
                var dateNow = new Date();
                var millisecond = dateNow.getTime()-bDay.getTime();
                var day = parseInt(millisecond/(1000*60*60*24));
                localStorage.setItem("dayStorage", day);
                var years = parseInt(day/360);
                localStorage.setItem("yearsStorage", years);
                var extraGift=(day%5000);
                localStorage.setItem("extraGiftStorage", extraGift);
                var gender = document.getElementById("gender").value;
                localStorage.setItem("genderStorage", gender);
                if(name==""||name=="undefinited"){
                    alert("Inserire il nome");
                    return;
                };
                if(surname==""||surname=="undefinited"){
                    alert("Inserire il cognome");
                    return;
                };
                //var anno=document.getElementById("bDay").value.substring(0,4);
                document.getElementById("p").innerHTML="<p>" + gender +  day + "<p>";
                window.open("Esercizio2_1.html");
            }
        </script>

    </body>
</html>